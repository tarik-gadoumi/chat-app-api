import { introspectionFromSchema } from 'graphql';
import { removeFederation } from '@graphql-codegen/plugin-helpers';
import { extname } from 'path';
export const plugin = async (schema, _documents, pluginConfig) => {
    const cleanSchema = pluginConfig.federation
        ? removeFederation(schema, {
            withDirectives: true,
        })
        : schema;
    const introspection = introspectionFromSchema(cleanSchema, { descriptions: true });
    return JSON.stringify(introspection);
};
export const validate = async (schema, documents, config, outputFile) => {
    if (extname(outputFile) !== '.json') {
        throw new Error(`Plugin "introspection" requires extension to be ".json"!`);
    }
};
//# sourceMappingURL=index.js.map